<section class="queryset-list">
  <div class="d-flex justify-content-center">
    <h2>
      <small class="text-muted">Manage : </small>
      Querysets
    </h2>

  </div>

  <div>
    <button
      class="btn btn-primary btn-sm"
      (click)="addThenEdit()"
      type="button"
      >Add</button>&nbsp;
  </div>

  <div class="d-flex justify-content-center" *ngIf="loadingQuerysets">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <div class="d-flex" *ngIf="!loadingQuerysets && querysets">
    <table class="table table-striped table-hover table-sm">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Model</th>
          <th scope="col">Distinct</th>
          <th scope="col">Created at</th>
          <th scope="col">Updated at</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
      <tr *ngFor="let queryset of querysets">
        <td>{{ queryset.id }}</td>
        <td>{{ queryset.name }}</td>
        <td>{{ queryset.model }}</td>
        <td>{{ queryset.distinct }}</td>
        <td>{{ queryset.created_at }}</td>
        <td>{{ queryset.updated_at }}</td>
        <td>
          <ng-template #confirmDeletePopoverTitle>
            <b>Confirm removal of <u>"{{ queryset.name }}"?</u></b>
          </ng-template>
          <ng-template #confirmDeletePopoverContent>
            <button
              type="button"
              class="btn btn-danger"
              (click)="deleteQueryset(queryset.id, popOver)"
              >Confirm</button>
            <button
              type="button"
              class="btn btn-seconday"
              (click)="popOver.close()"
              >Cancel</button>
          </ng-template>
          <button
            class="btn btn-secondary btn-sm"
            [routerLink]="['/querysets', queryset.id]"
            type="button"
            >Edit</button>&nbsp;
          <button
            class="btn btn-danger btn-sm"
            #popOver="ngbPopover"
            [ngbPopover]="confirmDeletePopoverContent"
            [popoverTitle]="confirmDeletePopoverTitle"
            [autoClose]="false"
            triggers="manual"
            (click)="popOver.open()"
            type="button"
            >Delete</button>
        </td>
      </tr>
      </tbody>
    </table>

  </div>
</section>
