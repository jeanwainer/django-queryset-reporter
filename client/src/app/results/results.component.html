<div class="d-flex justify-content-center" *ngIf="loadingQuerysets">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<div class="form-group" *ngIf="!loadingQuerysets">
  <label for="queryset-select">
    Select a queryset to introspect
  </label>
  <select
    class="form-control form-control-lg"
    [(ngModel)]="selectedQueryset"
    (ngModelChange)="onQuerysetChange()">

    <option
      *ngFor="let qs of querysets"
      [ngValue]="qs"
      class="has_value">{{ qs.name }}</option>

  </select>
</div>

<section *ngIf="selectedQueryset" class="queryset-detail">
  <div class="d-flex justify-content-center">
    <h2>
      <small class="text-muted">#{{ selectedQueryset.id }} : </small>
      {{ selectedQueryset.name }}
    </h2>
  </div>

  <div class="d-flex justify-content-center" *ngIf="loadingQueryset">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <div class="d-flex" *ngIf="!loadingQueryset && querysetResponse">
    <table class="table table-striped table-hover table-sm">
      <thead>
        <tr>
          <th *ngFor="let field of querysetResponse.fields" scope="col">
            {{ field['field_verbose'] }}
          </th>
        </tr>
      </thead>
      <tbody>
      <tr *ngFor="let row of querysetResponse.result">
        <td *ngFor="let field of querysetResponse.fields">
          {{ row[field['field']] }}
        </td>
      </tr>
      </tbody>
    </table>

  </div>
</section>
